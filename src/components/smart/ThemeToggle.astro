---
import { createTranslator, type Locale } from '../../i18n';

const locale = (Astro.locals.locale ?? 'en') as Locale;
const t = createTranslator(locale);
const currentTheme = Astro.locals.theme === 'dark' ? 'dark' : 'light';
const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
---

<form method="post" action="/api/theme" class="inline-flex">
	<input type="hidden" name="theme" value={nextTheme} />
	<button
		type="submit"
		class="px-3 py-2 text-sm rounded-full border border-[color:var(--color-border)] text-[color:var(--color-text)] hover:border-[color:var(--color-primary)]"
	>
		{currentTheme === 'dark' ? t('theme.light') : t('theme.dark')}
	</button>
</form>
