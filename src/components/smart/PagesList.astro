---
import { createTranslator, type Locale } from '../../i18n';
import { getPages } from '../../server/db';
import Card from '../ui/Card.astro';
import Section from '../ui/Section.astro';

const locale = (Astro.locals.locale ?? 'en') as Locale;
const translator = createTranslator(locale);
const pages = (await getPages(locale)).filter((p) => p.published);
---

<Section title={translator('pages.title')}>
	{pages.length === 0 ? (
		<p class="text-[color:var(--color-muted)]">{translator('projects.empty')}</p>
	) : (
		<div class="grid md:grid-cols-2">
			{pages.map((page) => (
				<Card
					title={page.slug}
					description={translator('pages.sections')}
					href={`/${locale}/pages/${page.slug}/`}
					linkLabel={translator('projects.view')}
				/>
			))}
		</div>
	)}
</Section>
